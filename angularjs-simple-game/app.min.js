var myApp=angular.module("myApp",[]);
myApp.controller("myController",["$scope","$interval",function(a,f){a.resetGame=function(){a.shuffle=function(a){for(var c,b,e=a.length;e;c=Math.floor(Math.random()*e),b=a[--e],a[e]=a[c],a[c]=b);return a};a.arr=a.shuffle([1,2,3,4,5,6,7,8,9,10,11,12]);a.olympic="olympic-one olympic-one olympic-two olympic-two olympic-three olympic-three olympic-four olympic-four olympic-five olympic-five olympic-six olympic-six".split(" ");a.olympicNew=[];for(var c=1,b=a.arr.length;c<=b;++c)a.olympicNew.push(a.olympic[a.arr.indexOf(c)]);
a.globalData={};a.globalData.arr=a.arr;a.globalData.olympic=a.olympicNew;a.steps=0;a.couple=0;a.timer=0;a.checkStart=!0;a.selectGender="male";a.levelProgress=0;a.levelProgressCount=0;a.btnStatus=!0;a.btnSuccess=!0;a.btnStop=!1;a.lev_ProgHeight=parseFloat(getComputedStyle(document.getElementById("levelProgress").parentNode).height);a.lev_ProgHeightFull=a.lev_ProgHeight;a.lev_ProgPart=a.lev_ProgHeight/6;document.getElementById("levelProgress").style.height=a.lev_ProgHeightFull+"px"};a.resetGame();a.countArr=
[];a.getElement=function(c){var b=document.getElementById("icon-list").children[c];a.countArr.push(a.globalData.olympic[c]);a.countArr.push(c);a.deselectAll();if(4===a.countArr.length){if(a.countArr[0]===a.countArr[2]&&a.countArr[1]!==a.countArr[3]){a.globalData.olympic.splice(a.globalData.olympic.indexOf(a.countArr[0]),1);a.globalData.olympic.splice(a.globalData.olympic.indexOf(a.countArr[2]),1);++a.couple;var d=setInterval(function(){--a.lev_ProgHeight;document.getElementById("levelProgress").style.height=
a.lev_ProgHeight+"px";a.levelProgressCount+=1;a.levelProgressCount===a.lev_ProgPart&&(a.levelProgressCount=0,clearInterval(d))},10)}a.countArr.splice(0,4)}b.setAttribute("class",a.globalData.olympic[c])};a.deselectAll=function(){for(var a=document.getElementById("icon-list"),b=0;b<a.children.length;++b)a.children[b].setAttribute("class","olympic-standart")};a.getSteps=function(){++a.steps};a.checkUser=function(){a.checkStart=void 0!==a.username?!1:!0};a.startGame=function(c,b){a.userStatus="male"===
b?"icon-male":"icon-female";a.userIcon=!0;a.btnStatus=!1;a.btnSuccess=!1;a.btnStop=!0;a.startDate=new Date;a.timerInterval=f(function(){a.timer=(new Date-a.startDate)/1E3},1)};a.stopGame=function(){a.btnStatus=!0;a.btnSuccess=!0;a.btnStop=!1;a.statistic.games.push({name:a.username,steps:a.steps,couples:a.couple,time:a.timer});a.resetGame();f.cancel(a.timerInterval)};a.$watch(function(){0>=a.lev_ProgHeight&&(a.btnStatus=!0,a.btnSuccess=!0,a.btnStop=!1,a.statistic.games.push({name:a.username,steps:a.steps,
couples:a.couple,time:a.timer}),a.resetGame(),f.cancel(a.timerInterval))});a.statistic={};a.statistic.games=[{name:"Bob",steps:48,couples:4,time:320.12}];a.statistic.sort="-time";a.statistic.sortColumn=function(a){var b=document.getElementById("results").children[0].children[0].children[0];a=b.children[a].querySelector("div");for(var d=0;d<b.children.length;++d)b.children[d].querySelector("div").setAttribute("class","resultsSortDown");"resultsSortUp"!==a.getAttribute("class")&&a.setAttribute("class",
"resultsSortUp")}}]);
